{"version":3,"file":"signalr.js","sourceRoot":"","sources":["../../../src/services/signalr.ts"],"names":[],"mappings":"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","sourcesContent":["import { ISignalRConnection } from './connection/i.signalr.connection';\r\nimport { SignalRConfiguration } from './signalr.configuration';\r\nimport { SignalRConnection } from './connection/signalr.connection';\r\nimport { NgZone, Injectable, Inject } from '@angular/core';\r\nimport { IConnectionOptions } from './connection/connection.options';\r\nimport { ConnectionTransport } from './connection/connection.transport';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { ConnectionStatus } from './connection/connection.status';\r\nimport { SIGNALR_JCONNECTION_TOKEN } from './signalr.module';\r\n\r\ndeclare var jQuery: any;\nexport class SignalR {\nprivate _configuration: SignalRConfiguration;\nprivate _zone: NgZone;\nprivate _jHubConnectionFn: any;\n/**\n * @param {?} configuration\n * @param {?} zone\n * @param {?} jHubConnectionFn\n */\npublic constructor(\r\n        configuration: SignalRConfiguration,\r\n        zone: NgZone,\r\n         jHubConnectionFn: Function\r\n    ) {\r\n        this._configuration = configuration;\r\n        this._zone = zone;\r\n        this._jHubConnectionFn = jHubConnectionFn;\r\n    }\n/**\n * @param {?=} options\n * @return {?}\n */\npublic createConnection(options?: IConnectionOptions): SignalRConnection {\r\n        let /** @type {?} */ status: Observable<ConnectionStatus>;\r\n        let /** @type {?} */ configuration = this.merge(options ? options : {});\r\n\r\n        try {\r\n\r\n            let /** @type {?} */ serializedQs = JSON.stringify(configuration.qs);\r\n            let /** @type {?} */ serializedTransport = JSON.stringify(configuration.transport);\r\n\r\n            if (configuration.logging) {\r\n                console.log(`Creating connecting with...`);\r\n                console.log(`configuration:[url: '${configuration.url}'] ...`);\r\n                console.log(`configuration:[hubName: '${configuration.hubName}'] ...`);\r\n                console.log(`configuration:[qs: '${serializedQs}'] ...`);\r\n                console.log(`configuration:[transport: '${serializedTransport}'] ...`);\r\n            }\r\n        } catch ( /** @type {?} */err) { }\r\n\r\n        // create connection object\r\n        let /** @type {?} */ jConnection = this._jHubConnectionFn(configuration.url);\r\n        jConnection.logging = configuration.logging;\r\n        jConnection.qs = configuration.qs;\r\n\r\n        // create a proxy\r\n        let /** @type {?} */ jProxy = jConnection.createHubProxy(configuration.hubName);\r\n        // !!! important. We need to register at least one function otherwise server callbacks will not work.\r\n        jProxy.on('noOp', function () { });\r\n\r\n        let /** @type {?} */ hubConnection = new SignalRConnection(jConnection, jProxy, this._zone, configuration);\r\n\r\n        return hubConnection;\r\n    }\n/**\n * @param {?=} options\n * @return {?}\n */\npublic connect(options?: IConnectionOptions): Promise<ISignalRConnection> {\r\n\r\n        return this.createConnection(options).start();\r\n    }\n/**\n * @param {?} overrides\n * @return {?}\n */\nprivate merge(overrides: IConnectionOptions): SignalRConfiguration {\r\n        let /** @type {?} */ merged: SignalRConfiguration = new SignalRConfiguration();\r\n        merged.hubName = overrides.hubName || this._configuration.hubName;\r\n        merged.url = overrides.url || this._configuration.url;\r\n        merged.qs = overrides.qs || this._configuration.qs;\r\n        merged.logging = this._configuration.logging;\r\n        merged.jsonp = overrides.jsonp || this._configuration.jsonp;\r\n        merged.withCredentials = overrides.withCredentials || this._configuration.withCredentials;\r\n        merged.transport = overrides.transport || this._configuration.transport;\r\n        return merged;\r\n    }\r\n\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: SignalRConfiguration, },\n{type: NgZone, },\n{type: Function, decorators: [{ type: Inject, args: [SIGNALR_JCONNECTION_TOKEN, ] }, ]},\n];\n}\n\nfunction SignalR_tsickle_Closure_declarations() {\n/** @type {?} */\nSignalR.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nSignalR.ctorParameters;\n/** @type {?} */\nSignalR.prototype._configuration;\n/** @type {?} */\nSignalR.prototype._zone;\n/** @type {?} */\nSignalR.prototype._jHubConnectionFn;\n}\n\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}