{"version":3,"file":"signalr-module.js","sourceRoot":"","sources":["../../../src/modules/signalr-module.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,QAAQ,EAAuB,MAAM,EAAE,cAAc,EAAE,sBAAsB;AACtF,OAAO,EAAE,OAAO,EAAE,4BAA4B;AAG9C,qBAAM,qBAAqB,GAAG,IAAI,cAAc,CAAuB,uBAAuB,CAAC,CAAC;;;;;;AAEhG,MAAM,wBAAwB,aAAmC,EAAE,IAAY;IAE3E,qBAAI,aAAa,GAAG,gBAAgB,EAAE,CAAC;IAEvC,MAAM,CAAC,IAAI,OAAO,CAAC,aAAa,EAAE,IAAI,EAAE,aAAa,CAAC,CAAC;CAC1D;;;;AAED;IACI,qBAAI,MAAM,GAAG,SAAS,EAAE,CAAC;IACzB,qBAAI,eAAe,GAAG,mBAAO,MAAM,EAAC,CAAC,MAAM,CAAC,aAAa,CAAC;IAC1D,EAAE,CAAC,CAAC,eAAe,IAAI,IAAI,CAAC,CAAC,CAAC;QAC1B,MAAM,IAAI,KAAK,CAAC,kIAAkI,CAAC,CAAC;KACvJ;IACD,MAAM,CAAC,eAAe,CAAC;CAC1B;;;;AAED;IACI,qBAAI,MAAM,GAAG,mBAAO,MAAM,EAAC,CAAC,MAAM,CAAC;IACnC,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC;QACjB,MAAM,IAAI,KAAK,CAAC,2GAA2G,CAAC,CAAC;KAChI;IACD,MAAM,CAAC,MAAM,CAAC;CACjB;SAKiB,OAAO;;;;;;;;IAIP,qBAAO;;;;cAAC,uBAAiC;QACnD,MAAM,CAAC;YACH,QAAQ,EAAE,aAAa;YACvB,SAAS,EAAE;gBACP;oBACI,OAAO,EAAE,qBAAqB;oBAC9B,UAAU,EAAE,uBAAuB;iBACtC;gBACD;oBACI,IAAI,EAAE,CAAC,qBAAqB,EAAE,MAAM,CAAC;oBACrC,OAAO,EAAE,OAAO;oBAChB,UAAU,EAAE,CAAC,aAAa,CAAC;iBAC9B;aACJ;SACJ,CAAC;;;;;IAEQ,sBAAQ;;;;QAClB,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;;;gBAxB1D,QAAQ,SAAC;oBACN,SAAS,EAAE,CAAC;4BACR,OAAO,EAAE,OAAO;4BAChB,QAAQ,IAAS;yBACpB,CAAC;iBACL;;;;wBAnCD;;SAoCa,aAAa","sourcesContent":["import { NgModule, ModuleWithProviders, NgZone, InjectionToken } from '@angular/core';\r\nimport { SignalR } from '../services/signalr';\r\nimport { SignalRConfiguration } from '../services/signalr.configuration';\r\n\r\nconst SIGNALR_CONFIGURATION = new InjectionToken<SignalRConfiguration>('SIGNALR_CONFIGURATION');\r\n\r\nexport function createSignalr(configuration: SignalRConfiguration, zone: NgZone) {\r\n\r\n    let jConnectionFn = getJConnectionFn();\r\n\r\n    return new SignalR(configuration, zone, jConnectionFn);\r\n}\r\n\r\nfunction getJConnectionFn(): any {\r\n    let jQuery = getJquery();\r\n    let hubConnectionFn = (<any> window).jQuery.hubConnection;\r\n    if (hubConnectionFn == null) {\r\n        throw new Error('Signalr failed to initialize. Script \\'jquery.signalR.js\\' is missing. Please make sure to include \\'jquery.signalR.js\\' script.');\r\n    }\r\n    return hubConnectionFn;\r\n}\r\n\r\nfunction getJquery(): any {\r\n    let jQuery = (<any> window).jQuery;\r\n    if (jQuery == null) {\r\n        throw new Error('Signalr failed to initialize. Script \\'jquery.js\\' is missing. Please make sure to include jquery script.');\r\n    }\r\n    return jQuery;\r\n}\r\n\r\n@NgModule({\r\n    providers: [{\r\n        provide: SignalR,\r\n        useValue: SignalR\r\n    }]\r\n})\r\nexport class SignalRModule {\r\n    public static forRoot(getSignalRConfiguration: Function): ModuleWithProviders {\r\n        return {\r\n            ngModule: SignalRModule,\r\n            providers: [\r\n                {\r\n                    provide: SIGNALR_CONFIGURATION,\r\n                    useFactory: getSignalRConfiguration\r\n                },\r\n                {\r\n                    deps: [SIGNALR_CONFIGURATION, NgZone],\r\n                    provide: SignalR,\r\n                    useFactory: (createSignalr)\r\n                }\r\n            ],\r\n        };\r\n    }\r\n    public static forChild(): ModuleWithProviders {\r\n        throw new Error(\"forChild method not implemented\");\r\n    }\r\n}\r\n"]}